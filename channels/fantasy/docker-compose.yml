version: "3.8"

services:
  scrollr-fantasy-api:
    build:
      context: ./api
      dockerfile: Dockerfile
    container_name: scrollr-fantasy-api
    ports:
      - "8084:8084"
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - ENCRYPTION_KEY=${ENCRYPTION_KEY}
      - ALLOWED_ORIGINS=${ALLOWED_ORIGINS}
      - INTEGRATION_URL=${INTEGRATION_URL}
      - COOLIFY_FQDN=${COOLIFY_FQDN}
      - YAHOO_CLIENT_ID=${YAHOO_CLIENT_ID}
      - YAHOO_CLIENT_SECRET=${YAHOO_CLIENT_SECRET}
      - FRONTEND_URL=${FRONTEND_URL}
      - INTERNAL_YAHOO_URL=http://scrollr-fantasy-service:3003
    restart: unless-stopped

  scrollr-fantasy-service:
    build:
      context: ./service
      dockerfile: Dockerfile
    container_name: scrollr-fantasy-service
    ports:
      - "3003:3003"
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - ENCRYPTION_KEY=${ENCRYPTION_KEY}
      - YAHOO_CLIENT_ID=${YAHOO_CLIENT_ID}
      - YAHOO_CLIENT_SECRET=${YAHOO_CLIENT_SECRET}
      - SYNC_INTERVAL_SECS=${SYNC_INTERVAL_SECS}
    restart: unless-stopped
