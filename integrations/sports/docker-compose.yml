version: "3.8"

services:
  scrollr-sports-api:
    build:
      context: ./api
      dockerfile: Dockerfile
    container_name: scrollr-sports-api
    ports:
      - "8082:8082"
    environment:
      - DATABASE_URL={{environment.DATABASE_URL}}
      - REDIS_URL={{environment.REDIS_URL}}
      - ENCRYPTION_KEY={{environment.ENCRYPTION_KEY}}
      - ALLOWED_ORIGINS={{environment.ALLOWED_ORIGINS}}
      - INTEGRATION_URL={{environment.INTEGRATION_URL}}
      - INTERNAL_SPORTS_URL=http://scrollr-sports-service:3002
    restart: unless-stopped

  scrollr-sports-service:
    build:
      context: ./service
      dockerfile: Dockerfile
    container_name: scrollr-sports-service
    ports:
      - "3002:3002"
    environment:
      - DATABASE_URL={{environment.DATABASE_URL}}
    restart: unless-stopped
